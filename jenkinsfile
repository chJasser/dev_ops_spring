pipeline {
    agent any
    environment {
        TAG = '1.0'
    }
    stages {
      
         stage('Clean') {
            steps {
                sh 'mvn clean'
            }
        }
        stage('Build') {
            steps {
                sh 'mvn -Dmaven.test.skip=true package'
            }
        }


        stage('install') {
            steps {
                sh 'mvn  -Dmaven.test.skip=true install '

            }

        }
        
      stage('build_push_image') {
              steps {
                        script {
                              def dockerImage = docker.build("fakher14/tpachat")
                            //  docker.withRegistry('','registryCredential'){
                              //           dockerImage.push("latest")
                               //}
                          }
              }
        }
       
       
       


    }
   

    }
